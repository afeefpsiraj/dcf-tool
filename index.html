<!DOCTYPE html>
<html>
<head>
  <title>DCF Valuation Tool</title>
  <style>
    body { font-family: Inter, Arial; background:#f4f6fb; padding:40px; }
    .card { background:#fff; padding:20px; border-radius:12px; max-width:800px; margin:auto; }
    input { width:100%; padding:10px; margin:6px 0; }
    button { padding:12px; background:#2563eb; color:#fff; border:none; border-radius:8px; }
  </style>
</head>
<body>
  <div class="card">
    <h2>DCF Valuation</h2>
    <input id="ticker" placeholder="Ticker (e.g. TCS)">
    <button onclick="fetchData()">Fetch Financials</button>

    <pre id="output"></pre>
  </div>

  <script>
    const API_BASE = "http://localhost:8000";
    
    async function fetchData() {
      const tickerInput = document.getElementById("ticker");
      const output = document.getElementById("output");
    
      const ticker = tickerInput.value.trim().toUpperCase();
      if (!ticker) {
        output.innerText = "❌ Enter a ticker";
        return;
      }
    
      output.innerText = "⏳ Fetching financials...";
    
      try {
        const res = await fetch(
          `${API_BASE}/api/financials?ticker=${encodeURIComponent(ticker)}`
        );
    
        if (!res.ok) {
          const text = await res.text();
          throw new Error(`HTTP ${res.status}: ${text}`);
        }
    
        const data = await res.json();
        output.innerText = JSON.stringify(data, null, 2);
    
      } catch (err) {
        output.innerText = `❌ Error:\n${err.message}`;
      }
    }
    </script>
    
</body>
</html>

